---
title: day4 ◯ケモン風バトルゲームを作ろう①
permalink: /day4/
---
# 弾幕ゲームを作ろう
## 弾幕ゲームとは？
弾幕ゲームは、キャラクターに対して発射される弾を避けまくるゲーム。弾の早さやタイミングを変えることで、ギリギリで避ける爽快感やクリアの達成感を楽しむゲーム。古くはインベーダーゲームとかのファミコン系のゲームもあり、作りやすさやオリジナリティの出しやすさもあって、よくインディーズ（メジャーじゃない、個人開発などの）ゲームで今でも多数のものが作られているジャンル。

今回はpyxelを使って、弾幕ゲームの基本を作っていくよ

## アプリの設計を考えてみる
  何も考えずにいきなりpythonを書き始めるのは、あんまり良くないとされている。みんなも英作文の宿題とかで、いきなり英語で文章を考えるより、まず日本語で何を言いたいかを整理して、どんな単語や文法を使うかを考えてから英文を作ったほうが効率が良かった利するので、どんな感じでコードを描いていくのか、どんな機能を使って作っていくのかを先に考えておこう。

  ### アプリに必要なものを考えてみよう
  プログラミングの勉強として、なにかアプリを作り始めるときに、「自分の実力でできるか」を考えないで、「こんなアプリができたらいいな」を考えるのがコツ。なんでかっていうと、それが一番楽しいから！アプリを作る順番として

  ①「こんなことできたらいいな！」をふんだん詰め込んだ「ぼくがかんがえたさいきょうのアプリ」を考える。
  ②アプリに必要なものを考える
  ③その中から、「最低限」のものを考える
  ④まずは最低限のものを作ってみる
  ⑤うまくいったら、機能を付け加えていく

  - ゲームの見た目的に必要なもの（必須）
    1. 操作キャラ（自分）のキャラクター画像（必須）
    2. 敵キャラのキャラクター画像（必須）
    3. 敵が撃ってくる弾の画像（必須）
    4. ゲームの背景画像
    5. スタート画面の画像
    その他にも、作り込んで行くと、いろんなものが必要になってくる
  - 音関連
    1. 効果音（当たったとき、ゲームオーバー、）
    2. bgm

  ここまでは、利用者＝プレイヤー視点で必要なこと。では、開発する側として考えなくちゃいけないことはなんだろう？

  - ゲームを動かすのに必要なデータ
    1. 操作キャラ動きに関する情報
      - キャラクターの初期位置
      - キャラクターの移動スピード
      - キャラクターの初期HP
      - 残基数

    2. 敵キャラ動きに関する情報
      - 敵キャラクターの初期位置
      - 敵キャラクターの移動スピード
      - 敵キャラクターの進行方向 
    
    3. 弾に関する情報
      - 弾のスピード
      - 弾のダメージ量

  他にも開発していくうえでいろいろ必要になってくるかもしれないけど、とりあえずこんな感じにしよう💦

  データを考えたあとで必要なのは、そのデータを使って、どんな機能を作っていくか、つまり機能を考えなくちゃいけない。

  - 操作キャラ関連の機能
    1. プレイヤーが右キー（左キー）を押したときに、操作キャラが右、左に動く
    2. 画面外に行こうとしたときに止まる
    3. 弾に当たると、ダメージぶんHPが減る
    4. HPがゼロになったときにゲームオーバー

  - 敵キャラ関連の機能
    1. 一定のスピードで進む
    2. 指定の間隔で弾を発射する

  - ゲームシステムの機能
    1. スタート画面をクリックするとゲームスタート
    2. ゲームオーバーになったら処理を停止
    3. ゲームオーバー画面で特定のキーを押したらスタート画面に戻る

## まずは初期画面を表示
pyxelの準備をしよう。
今回はパソコンにpyxelがインストール済みだから、インストール作業は必要なし。

- ### ① pythonファイルを用意しよう
  作業をしたいフォルダに移動したら、まずはpythonファイルを作成しよう。今回はdanmaku.pyという名前にするよ。

  ここに、pyxelの初期コードをコピペしよう。
  ```python
  import pyxel
  pyxel.init(120, 120)


  def update():
      pass
  def draw():
      pass
  pyxel.run(update, draw)
  ```

  これを実行して、黒い四角が出てきたらOK


- ### ②デザインファイル（pyxresファイル）を用意
  次に、キャラクターデザインとかをするためのpyxresファイルを用意するよ。

  今回はこちらで用意したデザイン用のファイル（pyxresファイル）を共有フォルダから自分のプロジェクトにコピーして使います。

  <details open markdown="1">

    <summary>自分でpyxresファイルを作成する場合</summary>
    ターミナルに次のコマンドを打ってみよう

    ```
    pyxel edit　danmaku_design
    ```
    実行すると、pyxel editorというお絵かき＋作曲ツールが出てくるので。　**一度保存してから**　画面を閉じよう。一度保存することで、danmaku_design.pyxresというファイルができて、このファイルがゲームのデザインとか音楽を担当するファイルになる。
    
  </details>

## キャラクターを初期位置に表示しよう




































    


